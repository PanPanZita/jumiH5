define(["jquery","jumi","isLogin","isLoginwx"],function(t,e,i,n){var a=localStorage.getItem("token"),s={activityId:1,token:a,requestSource:"WAP"};$.fn.extend({luckDraw:function(t){function n(){$.ajax({type:"post",url:"/needLogin/activity/checkDraw",dataType:"json",data:s,success:function(t){return"0000"!=t.code?void e.tips(t.msg):(N=t.data.sort,L=t.data.awardName,I+=50*N,a(),void("function"==typeof m&&m(t)))}})}function a(){b.removeClass("active"),b.eq(q).addClass("active"),q++,r(q),y-=50,100==y?(clearTimeout(D),l()):D=setTimeout(a,y)}function l(){b.removeClass("active"),b.eq(q).addClass("active"),q++,r(q),j-=50,200==j?(clearTimeout(D),c()):D=setTimeout(l,y)}function c(){b.removeClass("active"),b.eq(q).addClass("active"),q++,r(q),y+=50,y==I-100?(clearTimeout(D),o()):D=setTimeout(c,y)}function o(){0==q&&(q=T),u(q),h()}function r(t){t==T&&(q=0)}function h(){q=0,I=200,y=500,j=1e3}function u(t){var i=t-1,n=0,a=setInterval(function(){b.eq(i).toggleClass("active"),n>=6&&(clearInterval(a),b.eq(i).addClass("active"),e.alert({content:"恭喜！ 您成功抽取了"+L,button:[{value:"知道了",callback:function(){x=!1,k.find("img").attr("src","/h5/images/wheel/origin/wheel-start.png")}}]}),setTimeout(function(){x=!1,k.find("img").attr("src","/h5/images/wheel/origin/wheel-start.png")},200)),n++},200)}var v,w,d,g,f,m,p=$(this),b=p.children(".wheel-item"),k=$(this).find(".wheel-start");if(null!=t.line&&(w=t.line,null!=t.list&&(d=t.list,null!=t.width&&(g=Number(t.width),null!=t.height&&(f=Number(t.height),null!=t.click&&(v=t.click,null!=t.callback)))))){m=t.callback,p.css({width:g*d+"vw",height:f*w+"vw",position:"relative",marginTop:f/6.5+"vw"}),b.css({width:g+"vw",height:f+"vw",position:"absolute",padding:"1vw"}),k.css({top:f+1+"vw",left:g+1+"vw",width:g-2+"vw",height:f-2+"vw",lineHeight:f-2+"vw"});var T=d*w-(w-2)*(d-2);if(T>b.length)for(var C=0;C<T-b.length;C++)p.append("<li class='wheel-item'>"+T+"</li>");b=p.children(".wheel-item"),b.css({width:g+"vw",height:f+"vw",position:"absolute"}),b.each(function(t){t<d?$(this).css({top:0,left:t%d*g+"vw"}):t>=d&&t<d+w-2?$(this).css({top:(t+1)%d*f+"vw",right:0}):t>=d+w-2&&t<2*d+w-2?$(this).css({bottom:0,right:(t+2)%d*g+"vw"}):$(this).css({bottom:t%d*f+"vw",left:0}),t+1>T&&$(this).remove()});var q=0,y=500,j=1e3,I=200,x=!1,L="",N=-1,D=0;$(v).click(function(){x||i(function(){n(),x=!0,k.find("img").attr("src","/h5/images/wheel/origin/wheel-end.png")})})}}})});