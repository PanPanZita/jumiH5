define(["wx","jumi"],function(e,t){var s=decodeURIComponent(location.href.split("#")[0]);s=s.split(".")[0],s=s.split("//")[1];var a={defaults:{sharetitle:"投资享收益,娱乐玩不停!尽在聚米众筹!",sharedesc:"安全、专业的文化众筹社区\r\nwww.jumizc.com",shareimg:"https://jumifinance.oss-cn-hangzhou.aliyuncs.com/20150701001719597164680.jpg",shareurl:"https://"+s+".jumizc.com/h5/views/main/index.html"},setTitle:function(){return arguments[0]&&(a.defaults.sharetitle=arguments[0]),this},setDesc:function(){return arguments[0]&&(a.defaults.sharedesc=arguments[0]),this},setImg:function(){return arguments[0]&&(a.defaults.shareimg=arguments[0]),this},setUrl:function(){return arguments[0]&&(a.defaults.shareurl=arguments[0]),this},isWeixin:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},share:function(){var s=arguments,n=decodeURIComponent(location.href.split("#")[0]),r=localStorage.getItem("token"),i={url:n,requestSource:"WAP"},o={money:0,sourceType:4,token:r,requestSource:"WAP"};return a.isWeixin()&&$.ajax({url:"/weixin/initJs",type:"post",dataType:"json",data:i,success:function(t){"0000"==t.code?e.config({debug:!1,appId:t.data.appId,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","previewImage","getNetworkType","scanQRCode","chooseWXPay"]}):console.log("errorMsg============================"+t.msg)},error:function(){}}),e.ready(function(){e.onMenuShareTimeline({title:a.defaults.sharetitle,link:a.defaults.shareurl,imgUrl:a.defaults.shareimg,success:function(){window.ShareCallback&&window.ShareCallback(),1==s[0]&&$.ajax({url:"/common/addUserPoints",type:"post",dataType:"json",data:o,success:function(e){t.tips("分享成功！")},error:function(){}})},cancel:function(){}}),e.onMenuShareAppMessage({title:a.defaults.sharetitle,desc:a.defaults.sharedesc,link:a.defaults.shareurl,imgUrl:a.defaults.shareimg,type:"",dataUrl:"",success:function(){window.ShareCallback&&window.ShareCallback(),1==s[0]&&$.ajax({url:"/common/addUserPoints",type:"post",dataType:"json",data:o,success:function(e){},error:function(){}})},cancel:function(){}}),e.onMenuShareQQ({title:a.defaults.sharetitle,desc:a.defaults.sharedesc,link:a.defaults.shareurl,imgUrl:a.defaults.shareimg,success:function(){},cancel:function(){}}),e.onMenuShareWeibo({title:a.defaults.sharetitle,desc:a.defaults.sharedesc,link:a.defaults.shareurl,imgUrl:a.defaults.shareimg,success:function(){},cancel:function(){}})}),e.error(function(e){}),this}};return a});