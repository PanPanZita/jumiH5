define(["jumi","jquery"],function(e,a){var t=function(t,o){var n={code:t,requestSource:"WAP"},i=o.split("report.html?invitorUserId=")[1];a.ajax({url:"/weixin/wxloginByCode",type:"post",data:n,dataType:"json",success:function(a){if("0000"===a.code)if(1==a.data.bindStatus)if(localStorage.setItem("token",a.data.token),i){var t=o.split("?invitorUserId=")[0];location.replace(t)}else location.replace(o);else location.replace("/h5/views/common/binding.html?openId="+a.data.openId+"&unionId="+a.data.unionId+"&headImageUrl="+a.data.headImageUrl+"&nickName="+a.data.nickName+"&redirectUrl="+o);else e.tips(a.msg)},error:function(e){console.log(e)}})};return t});