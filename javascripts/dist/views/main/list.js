define(["jumi","nav","tab","scrolltotop","asyncload","getPara","vue","isLogin","isLoginwx","weixin","md5","load"],function(e,t,a,o,r,i,s,n,u,d,l,c){var p=localStorage.getItem("token"),g=i.get(),m={itemName:decodeURI(g.itemName),currentPage:1,pageSize:10,status:g.status,type:g.type,token:p,requestSource:"WAP"};$.ajax({url:"/item/getBorrowListByCondition",type:"post",dataType:"json",data:m,success:function(a){new s({el:"body",components:{"my-search":{template:"#searchTemplate",data:function(){}},"my-list":{template:"#listTemplate",data:function(){return{lists:a.data,currentPage:1,isLoading:0}},methods:{listjump:function(e,t){n(function(){location.href="/h5/views/invest/invest.html?itemId="+e}),t.preventDefault()},highlight:function(){var e=/^\S{0}$/,t=1==$("#userpwdreal").attr("proving")?1:0,a=1==$("#userconfirmpwdreal").attr("proving")?1:0,o=!e.test(this.userpwdreal)&&!e.test(this.userconfirmpwdreal),r=t&&a;o&&r?($(".ui-dialog-upgrade .ui-dialog-footer button.ui-dialog-autofocus").removeAttr("disabled","disabled"),$(".ui-dialog-upgrade .ui-dialog-footer button.ui-dialog-autofocus").css({color:"#ec6121"})):($(".ui-dialog-upgrade .ui-dialog-footer button.ui-dialog-autofocus").attr("disabled","disabled"),$(".ui-dialog-upgrade .ui-dialog-footer button.ui-dialog-autofocus").css({color:"#999"}))},userpwdrealKeyup:function(){var t=/^[0-9]*$/;return t.test(this.userpwdreal)?(6==this.userpwdreal.length?$("#userpwdreal").attr("proving",1):$("#userpwdreal").attr("proving",0),void this.highlight()):($("#userpwdreal").attr("proving",0),e.tips("支付密码格式错误！"),void(this.userpwdreal=""))},userconfirmpwdrealKeyup:function(){var t=this.userconfirmpwdreal.length;6==t?this.userconfirmpwdreal==this.userpwdreal?$("#userconfirmpwdreal").attr("proving",1):($("#userconfirmpwdreal").attr("proving",0),e.tips("两次设置的支付密码不一致！")):$("#userconfirmpwdreal").attr("proving",0),this.highlight()}}}},ready:function(){var a=this;t.setActiveNav("project"),$(".async").asyncload(),$("#myloading").remove();var o=location.href.split("&code=")[0],r=location.href.split("&code=")[1];if(r){var i=r.split("&state=")[0];u(i,o)}d.setTitle().setDesc().setImg().setUrl().share();var s={token:p,requestSource:"WAP"};$.ajax({url:"/common/getResetPayPasswordIndex",type:"post",datatype:"json",data:s,success:function(t){"0000"==t.code&&1==t.data.isLogin&&0==t.data.hasChangePaypassword&&e.alert({title:"",content:'<div class="textcenter"><p>尊敬的用户：</p><p>聚米众筹进行了4.0账户安全升级，</p><p>请完成账户升级操作</p></div>',button:[{value:"立即前往",callback:function(){$("#realname").html(t.data.realname),$("#idNumber").html(t.data.idNumber),e.alert({title:"",skin:"ui-dialog-upgrade",content:document.getElementById("upgradeWrap"),button:[{value:"立即修改",callback:function(){var o={password:l(a.$children[0].userpwdreal).toLocaleUpperCase(),newPassword:l(a.$children[0].userpwdreal).toLocaleUpperCase(),confirmPassword:l(a.$children[0].userconfirmpwdreal).toLocaleUpperCase(),pwdType:"paypassword",token:p,requestSource:"WAP"};$.ajax({url:"/userCenter/setting/resetPayPassword",type:"post",datatype:"json",data:o,success:function(){"0000"==t.code?e.alert({title:"",skin:"ui-dialog-upsuccess",content:document.getElementById("upsuccess"),button:[{value:"完成",callback:function(){}}]}):e.tips(t.msg)}})}}]}),$(".ui-dialog .ui-dialog-footer button.ui-dialog-autofocus").attr("disabled","disabled")}}]})}}),c.pullup({button:"#loadMoreButton",callback:function(e){var t=a.$children[1];e.currentPage++;var o={itemName:decodeURI(g.itemName),pageSize:10,currentPage:e.currentPage,status:g.status,type:g.type,token:p,requestSource:"WAP"};$.ajax({url:"/item/getBorrowListByCondition",type:"post",dataType:"json",data:o,success:function(a){if("0000"==a.code)if(null!=a.data&&a.data.length>0){for(var o=0;o<a.data.length;o++)t.lists.push(a.data[o]);setTimeout(function(){$(".async").asyncload()},0),e.isLoading=0}else e.isLoading=2,$(e.button).html("-- 我已倾囊相授 --")}})}})}})}})});