define(["jumi","nav","isLogin","isLoginwx","vue","weixin","md5"],function(t,e,a,n,o,s,c){var r=localStorage.getItem("token"),i={token:r,requestSource:"WAP"};$.ajax({url:"/userCenter/personalCenter/getMyPersonalCenter",type:"post",dataType:"json",data:i,success:function(i){console.log(i),"0000"==i.code?i.data&&new o({el:"body",components:{"my-account":{template:"#accountTemplate",data:function(){return{data:i.data,isLogin:!0}},filters:{myPhone:function(t){var e=t.substr(0,3)+"****"+t.substr(7);return e}},methods:{toLink:function(){1==this.data.statAcct?t.alert({title:"提示",content:'<p class="textcenter">正在开户中，请稍后操作</p>',button:[{value:"知道了",callback:function(){}}]}):location.href="/h5/views/account/settings/bankcardToBind.html?redirectURL="+location.pathname},assets:function(){location.href="/h5/views/account/assets/assets.html?redirectURL="+location.pathname},closeMask:function(){var t=this;$.ajax({url:"/common/updatePageGuide",data:{user_id:t.data.user_info.user_id},success:function(e){t.data.is_click=1}})},bankcard:function(){var e=this;0==e.data.statAcct||9==e.data.statAcct?t.alert({skin:"ui-dialog-bankcard",content:'<p class="textcenter">尊敬的用户：</p><p class="textcenter">您目前尚未开户</p>',button:[{value:"取消",callback:function(){}},{value:"立即开户",callback:function(){location.href="/h5/views/account/settings/bankcardToBind.html?redirectURL="+location.pathname}}]}):1==e.data.statAcct?t.alert({title:"提示",content:'<p class="textcenter">正在开户中，请稍后操作</p>',button:[{value:"知道了",callback:function(){}}]}):location.href="/h5/views/account/settings/bankcardToShow.html?redirectURL="+location.pathname},highlight:function(){var t=/^\S{0}$/,e=1==$("#userpwdreal").attr("proving")?1:0,a=1==$("#userconfirmpwdreal").attr("proving")?1:0,n=!t.test(this.userpwdreal)&&!t.test(this.userconfirmpwdreal),o=e&&a;n&&o?($(".ui-dialog-upgrade .ui-dialog-footer button.ui-dialog-autofocus").removeAttr("disabled","disabled"),$(".ui-dialog-upgrade .ui-dialog-footer button.ui-dialog-autofocus").css({color:"#ec6121"})):($(".ui-dialog-upgrade .ui-dialog-footer button.ui-dialog-autofocus").attr("disabled","disabled"),$(".ui-dialog-upgrade .ui-dialog-footer button.ui-dialog-autofocus").css({color:"#999"}))},userpwdrealKeyup:function(){var e=/^[0-9]*$/;return e.test(this.userpwdreal)?(6==this.userpwdreal.length?$("#userpwdreal").attr("proving",1):$("#userpwdreal").attr("proving",0),void this.highlight()):($("#userpwdreal").attr("proving",0),t.tips("支付密码格式错误！"),void(this.userpwdreal=""))},userconfirmpwdrealKeyup:function(){var e=this.userconfirmpwdreal.length;6==e?this.userconfirmpwdreal==this.userpwdreal?$("#userconfirmpwdreal").attr("proving",1):($("#userconfirmpwdreal").attr("proving",0),t.tips("两次设置的支付密码不一致！")):$("#userconfirmpwdreal").attr("proving",0),this.highlight()},recharge:function(){var e=this,a={token:r,requestSource:"WAP"};$.ajax({url:"/userCenter/userAccount/isBindCard",type:"post",dataType:"json",data:a,success:function(a){"0000"==a.code?0==e.data.statBind||3==e.data.statBind||9==e.data.statBind?t.alert({title:"提示",content:'<p class="textcenter">先绑定银行卡后才能充值哦~</p>',button:[{value:"去绑卡",callback:function(){location.href="/h5/views/account/settings/bankcardToBindAndCashout.html"+location.search}}]}):1==e.data.statBind?t.alert({title:"提示",content:'<p class="textcenter">正在绑卡中，请稍后操作</p>',button:[{value:"知道了",callback:function(){}}]}):2==e.data.statBind?t.alert({title:"提示",content:'<p class="textcenter">正在解绑中，请稍后操作</p>',button:[{value:"知道了",callback:function(){}}]}):4!=e.data.statBind&&8!=e.data.statBind||(location.href="/h5/views/account/assets/recharge.html"+location.search):t.tips(a.msg)}})},cashout:function(){var e=this,a={token:r,requestSource:"WAP"};$.ajax({url:"/userCenter/userAccount/isBindCard",type:"post",dataType:"json",data:a,success:function(a){"0000"==a.code?0==e.data.statBind||3==e.data.statBind||9==e.data.statBind?t.alert({title:"提示",content:'<p class="textcenter">先绑定银行卡后才能提现哦~</p>',button:[{value:"去绑卡",callback:function(){location.href="/h5/views/account/settings/bankcardToBindAndCashout.html"+location.search}}]}):1==e.data.statBind?t.alert({title:"提示",content:'<p class="textcenter">正在绑卡中，请稍后操作</p>',button:[{value:"知道了",callback:function(){}}]}):2==e.data.statBind?t.alert({title:"提示",content:'<p class="textcenter">正在解绑中，请稍后操作</p>',button:[{value:"知道了",callback:function(){}}]}):4!=e.data.statBind&&8!=e.data.statBind||(location.href="/h5/views/account/assets/cashout.html"+location.search):t.tips(a.msg)}})}}}},ready:function(){var a=this;e.setActiveNav("account"),$("#myloading").remove();var n=$(".nickname").html(),o=$(".nickname").html().length;o>=7&&$(".nickname").html(n.substring(0,6)+"..."),s.setTitle().setDesc().setImg().setUrl().share();var i={token:r,requestSource:"WAP"};$.ajax({url:"/common/getResetPayPasswordIndex",type:"post",datatype:"json",data:i,success:function(e){"0000"==e.code&&1==e.data.isLogin&&0==e.data.hasChangePaypassword&&t.alert({title:"",content:'<div class="textcenter"><p>尊敬的用户：</p><p>聚米众筹进行了4.0账户安全升级，</p><p>请完成账户升级操作</p></div>',button:[{value:"立即前往",callback:function(){$("#realname").html(e.data.realname),$("#idNumber").html(e.data.idNumber),t.alert({title:"",skin:"ui-dialog-upgrade",content:document.getElementById("upgradeWrap"),button:[{value:"立即修改",callback:function(){var n={password:c(a.$children[0].userpwdreal).toLocaleUpperCase(),newPassword:c(a.$children[0].userpwdreal).toLocaleUpperCase(),confirmPassword:c(a.$children[0].userconfirmpwdreal).toLocaleUpperCase(),pwdType:"paypassword",token:r,requestSource:"WAP"};$.ajax({url:"/userCenter/setting/resetPayPassword",type:"post",datatype:"json",data:n,success:function(){"0000"==e.code?t.alert({title:"",skin:"ui-dialog-upsuccess",content:document.getElementById("upsuccess"),button:[{value:"完成",callback:function(){}}]}):t.tips(e.msg)}})}}]}),$(".ui-dialog .ui-dialog-footer button.ui-dialog-autofocus").attr("disabled","disabled")}}]})}})}}):new o({el:"body",components:{"my-account":{template:"#accountTemplate",data:function(){return{data:"",isLogin:!1}},methods:{toLogin:function(){a()}}}},ready:function(){var a=location.href.split("?code=")[0],o=location.href.split("?code=")[1];if(o){var i=o.split("&state=")[0];n(i,a)}var l=this;e.setActiveNav("account"),$("#myloading").remove(),s.setTitle().setDesc().setImg().setUrl().share();var u={token:r,requestSource:"WAP"};$.ajax({url:"/common/getResetPayPasswordIndex",type:"post",datatype:"json",data:u,success:function(e){"0000"==e.code&&1==e.data.isLogin&&0==e.data.hasChangePaypassword&&t.alert({title:"",content:'<div class="textcenter"><p>尊敬的用户：</p><p>聚米众筹进行了4.0账户安全升级，</p><p>请完成账户升级操作</p></div>',button:[{value:"立即前往",callback:function(){$("#realname").html(e.data.realname),$("#idNumber").html(e.data.idNumber),t.alert({title:"",skin:"ui-dialog-upgrade",content:document.getElementById("upgradeWrap"),button:[{value:"立即修改",callback:function(){var a={password:c(l.$children[0].userpwdreal).toLocaleUpperCase(),newPassword:c(l.$children[0].userpwdreal).toLocaleUpperCase(),confirmPassword:c(l.$children[0].userconfirmpwdreal).toLocaleUpperCase(),pwdType:"paypassword",token:r,requestSource:"WAP"};$.ajax({url:"/userCenter/setting/resetPayPassword",type:"post",datatype:"json",data:a,success:function(){"0000"==e.code?t.alert({title:"",skin:"ui-dialog-upsuccess",content:document.getElementById("upsuccess"),button:[{value:"完成",callback:function(){}}]}):t.tips(e.msg)}})}}]}),$(".ui-dialog .ui-dialog-footer button.ui-dialog-autofocus").attr("disabled","disabled")}}]})}})}})},error:function(){t.tips("网络超时！")}})});