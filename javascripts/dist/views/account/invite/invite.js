define(["vue","asyncload","weixin","slidefocus","isLogin","isLoginwx","jumi","DateFormat","wxBackbtn"],function(a,e,t,i,n,r,s,o,d){var c=localStorage.getItem("token"),h=location.href.split("?code=")[0],l=location.href.split("?code=")[1],m={token:c,requestSource:"WAP"};if(l){var u=l.split("&state=")[0];r(u,h)}else n(function(){$.ajax({type:"get",url:"/userCenter/inviteFriend/getHomePageData",dataType:"json",data:m,success:function(e){if("0000"==e.code){if(null!=e.data)if(1==e.data.jumpState){$("#inviteBox").removeClass("hiddenImportant"),$("#financeBox").addClass("hiddenImportant"),$("title").text("邀请好友-聚米众筹"),$("body").css({background:"#fff"}),$("html").css({background:"#fff"});var e=e.data;new a({el:"body",components:{"my-invite":{template:"#inviteTemplate",data:function(){return{data:e,jumpState:e.jumpState,shareContent:e.shareContent,sharePic:e.sharePic,shareTitle:e.shareTitle,shareUrl:e.shareUrl,breakExplain:e.inviFriHomePageData.breakExplain,cashGearList:e.inviFriHomePageData.cashGearList,cashTaskBrief:e.inviFriHomePageData.cashTaskBrief,curPerCashReward:e.inviFriHomePageData.curPerCashReward,curPerHbReward:e.inviFriHomePageData.curPerHbReward,finActStatus:e.inviFriHomePageData.finActStatus,finManagerBannerUrl:e.inviFriHomePageData.finManagerBannerUrl,finPreperAssessState:e.inviFriHomePageData.finPreperAssessState,finRuleBrief:e.inviFriHomePageData.finRuleBrief,finRuleId:e.inviFriHomePageData.finRuleId,firInvestNum:e.inviFriHomePageData.firInvestNum,hasUpgradeFinManager:e.inviFriHomePageData.hasUpgradeFinManager,hongbaoGearList:e.inviFriHomePageData.hongbaoGearList,hongbaoTaskBrief:e.inviFriHomePageData.hongbaoTaskBrief,investAmount:e.inviFriHomePageData.investAmount,inviActStatus:e.inviFriHomePageData.inviActStatus,inviFriBannerUrl:e.inviFriHomePageData.inviFriBannerUrl,inviRuleId:e.inviFriHomePageData.inviRuleId,regiterNum:e.inviFriHomePageData.regiterNum,rewardType:e.inviFriHomePageData.rewardType,startTime:e.inviFriHomePageData.startTime,endTime:e.inviFriHomePageData.endTime,totalCashReward:e.inviFriHomePageData.totalCashReward,totalHbReward:e.inviFriHomePageData.totalHbReward,isShare:!1,days:"00",hours:"00",minutes:"00",seconds:"00",count:0,startcount:0,endcount:0,interval:null,commonStart:0,commonEnd:0}},compiled:function(){this.commonStart=new Date(this.startTime).Format("yyyy-MM-dd"),this.commonEnd=new Date(this.endTime).Format("yyyy-MM-dd");var a=Date.parse(new Date);this.startcount=this.startTime-a,this.endcount=this.endTime-a,"1"==this.inviActStatus?(this.count=this.startcount,this.countdown()):"2"==this.inviActStatus&&(this.count=this.endcount,this.countdown())},methods:{show:function(){this.isShare=!0},hide:function(){this.isShare=!1},gearGet:function(a,e,t,i){var n=this,r={gearId:a,token:c,requestSource:"WAP",ruleId:n.inviRuleId};$.ajax({type:"get",url:"/userCenter/inviteFriend/receiveGearReward",data:r,dataType:"json",success:function(a){if("0000"==a.code){var r=a.data.realStatus;1==r?("0"==e?(n.curPerHbReward=n.curPerHbReward+t,n.totalHbReward=n.totalHbReward+t,n.hongbaoGearList[i].hasAlreadyReceive=1):"1"==e&&(n.curPerCashReward=n.curPerCashReward+t,n.totalCashReward=n.totalCashReward+t,n.cashGearList[i].hasAlreadyReceive=1),1==a.data.hasUpFinManager?n.hasUpgradeFinManager=1:2==a.data.hasUpFinManager&&(n.hasUpgradeFinManager=0)):s.alert({title:"提示",content:"您还未开户，是否去开户？",button:[{value:"去开户",callback:function(){location.href="/h5/views/account/settings/bankcardToBind.html"}}]})}else{var o=a.msg;s.alert({title:"提示",content:o,button:[{value:"知道了"}]})}}})},unGet:function(){$(".un-get").css({display:"none"})},update:function(){if(this.count=this.count-1e3,this.count<=0)return this.seconds="00",clearInterval(this.interval),void(1==this.inviActStatus?this.inviActStatus=2:2==this.inviActStatus&&(this.inviActStatus=3));var a=this.count%864e5;this.days=parseInt(this.count/864e5)+"",this.days<10&&(this.days="0"+this.days);var e=a%36e5;this.hours=parseInt(a/36e5)+"",this.hours<10&&(this.hours="0"+this.hours);var t=e%6e4;this.minutes=parseInt(e/6e4)+"",this.minutes<10&&(this.minutes="0"+this.minutes);this.seconds=parseInt(t/1e3)+"",this.seconds<10&&(this.seconds="0"+this.seconds)},countdown:function(){this.interval=setInterval(this.update,1e3)}}}},ready:function(){i.init({id:"#slider"}),$("#myloading").remove();var a=this;if("ios"==localStorage.fromapp){var e={title:a.$children[0].data.shareTitle,desc:a.$children[0].data.shareContent,img:a.$children[0].data.sharePic,url:a.$children[0].data.shareUrl};window.webkit.messageHandlers.share.postMessage(e)}else if("android"==localStorage.fromapp){var e={title:a.$children[0].data.shareTitle,desc:a.$children[0].data.shareContent,img:a.$children[0].data.sharePic,url:a.$children[0].data.shareUrl};window.Android.callAndroidAction("0",JSON.stringify(e))}else t.setTitle(a.$children[0].data.shareTitle).setDesc(a.$children[0].data.shareContent).setImg(a.$children[0].data.sharePic).setUrl(a.$children[0].data.shareUrl).share()}})}else{$("#inviteBox").addClass("hiddenImportant"),$("#financeBox").removeClass("hiddenImportant"),$("title").text("理财经理-聚米众筹"),$("body").css({background:"#fff1BF"}),$("html").css({background:"#fff"});var e=e.data;new a({el:"body",components:{"my-finance":{template:"#financeTemplate",data:function(){return{data:e,jumpState:e.jumpState,shareContent:e.shareContent,sharePic:e.sharePic,shareTitle:e.shareTitle,shareUrl:e.shareUrl,activityStatus:e.finManagerHomePageData.activityStatus,assmentAmount:e.finManagerHomePageData.assmentAmount,assmentId:e.finManagerHomePageData.assmentId,assmentStatus:e.finManagerHomePageData.assmentStatus,breakExplain:e.finManagerHomePageData.breakExplain,curNoPayCommission:e.finManagerHomePageData.curNoPayCommission,curPayCommission:e.finManagerHomePageData.curPayCommission,finManagerBannerUrl:e.finManagerHomePageData.finManagerBannerUrl,hasOutOfDate:e.finManagerHomePageData.hasOutOfDate,hasReachTarget:e.finManagerHomePageData.hasReachTarget,investAmount:e.finManagerHomePageData.investAmount,proBarAmount:e.finManagerHomePageData.proBarAmount,startTime:e.finManagerHomePageData.startTime,endTime:e.finManagerHomePageData.endTime,totalNoPayCommission:e.finManagerHomePageData.totalNoPayCommission,totalPayCommission:e.finManagerHomePageData.totalPayCommission,isShare:!1,days:"00",hours:"00",minutes:"00",seconds:"00",count:0,startcount:0,endcount:0,interval:null}},compiled:function(){},methods:{show:function(){this.isShare=!0},hide:function(){this.isShare=!1},test:function(){s.alert({content:document.getElementById("upgrade-success"),button:[{value:"知道了"}]})},unGet:function(){$(".un-get").css({display:"none"}),$(".has-get").css({display:"none"})}}}},ready:function(){i.init({id:"#slider"}),$("#myloading").remove();var a=this;if("ios"==localStorage.fromapp){var e={title:a.$children[0].data.shareTitle,desc:a.$children[0].data.shareContent,img:a.$children[0].data.sharePic,url:a.$children[0].data.shareUrl};window.webkit.messageHandlers.share.postMessage(e)}else if("android"==localStorage.fromapp){var e={title:a.$children[0].data.shareTitle,desc:a.$children[0].data.shareContent,img:a.$children[0].data.sharePic,url:a.$children[0].data.shareUrl};window.Android.callAndroidAction("0",JSON.stringify(e))}else t.setTitle(a.$children[0].data.shareTitle).setDesc(a.$children[0].data.shareContent).setImg(a.$children[0].data.sharePic).setUrl(a.$children[0].data.shareUrl).share()}})}}else s.tips(e.msg)}})});var g=document.referrer,f=g.split(".jumizc.com")[1];"/h5/views/account/account.html"!=f&&d.setReturnUrl()});