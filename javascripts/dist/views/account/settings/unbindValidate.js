define(["jumi","nav","isLogin","isLoginwx","vue","getPara","weixin"],function(e,t,n,o,c,i,a){var s=i.get(),d=localStorage.getItem("token");new c({el:"body",components:{"my-unbinding":{template:"#unbindingTemplate",data:function(){return{phone:s.phone,phoneCode:"",codeBtndisabled:!1,countTime:60,flagVoice:!0,setIntervalCode:null}},methods:{getVoicecode:function(){var t=this;if(t.flagVoice){var n={phone:t.phone,requestSource:"WAP"};t.flagVoice=!1,$.ajax({url:"/common/authcode/voiceCode",type:"get",datatype:"json",data:n,success:function(n){"0000"==n.code?e.tips("语音验证码发送成功，请注意接听来电..."):e.tips(n.msg),setTimeout(function(){t.flagVoice=!0},5e3)}})}},getCode:function(){var t=this,n={phone:s.phone};$.ajax({url:"/common/authcode/getPhoneCode",type:"post",dataType:"json",data:n,success:function(n){"0000"==n.code?(e.tips("验证码发送成功，请注意查收..."),clearInterval(t.setIntervalCode),t.codeBtndisabled=!0,t.setIntervalCode=setInterval(function(){t.countTime--,$(".getCode").html(t.countTime+"s"),t.countTime<=0&&(clearInterval(t.setIntervalCode),t.countTime=60,$(".getCode").html("重新获取"),t.codeBtndisabled=!1)},1e3)):e.tips(n.msg)}})},next:function(){var t=this,n={phone:s.phone,phoneCode:t.phoneCode,token:d,requestSource:"WAP"};$.ajax({url:"/userCenter/userAccount/unbindCard",type:"post",dataType:"json",data:n,success:function(t){"0000"==t.code?t.data<2?location.href="/h5/views/account/settings/bankcardToBindAndCashout.html":location.href="/h5/views/account/settings/banklist.html":e.tips(t.msg)}})},cancel:function(){location.href="/h5/views/account/settings/bankcardToShow.html?redirectURL=/h5/views/account/account.html"}},computed:{phoneStr:function(){var e=this;return e.phone.substr(0,3)+"****"+e.phone.substr(7,4)}}}},ready:function(){$("#myloading").remove();var t=this;e.tips("验证码发送成功，请注意查收..."),clearInterval(t.$children[0].setIntervalCode),t.$children[0].codeBtndisabled=!0,t.$children[0].setIntervalCode=setInterval(function(){t.$children[0].countTime--,$(".getCode").html(t.$children[0].countTime+"s"),t.$children[0].countTime<=0&&(clearInterval(t.$children[0].setIntervalCode),t.$children[0].countTime=60,$(".getCode").html("重新获取"),t.$children[0].codeBtndisabled=!1)},1e3)}});var r=location.href.split("&code=")[0],l=location.href.split("&code=")[1];if(l){var u=l.split("&state=")[0];o(u,r)}});