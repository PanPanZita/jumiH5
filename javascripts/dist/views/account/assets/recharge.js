define(["jumi","nav","tab","isLogin","isLoginwx","vue","weixin"],function(e,t,o,a,n,s,r){var c=localStorage.getItem("token"),i={token:c,requestSource:"WAP"};a(function(){$.ajax({url:"/userCenter/userAccount/getRechargeIndex",type:"post",dataType:"json",data:i,success:function(o){"0000"==o.code?new s({el:"body",components:{"my-recharge":{template:"#rechargeTemplate",data:function(){return{data:o.data,money:"",req_data:"",isAbled:!0,orderNo:"",phonecode:"",countdown:null,count:60}},methods:{inputMoneyKeyup:function(){var e=this.money,t=/^\S{0}$/,o=/^(([1-9]{1}\d*(\.\d{1,2})?)|(0\.([1-9]|\d[1-9])))$/;!t.test(e)&&o.test(e)?this.isAbled=!1:this.isAbled=!0},inputMoneyBlur:function(){var t=this.money,o=/^\S{0}$/,a=/^(([1-9]{1}\d*(\.\d{1,2})?)|(0\.([1-9]|\d[1-9])))$/;o.test(t)||a.test(t)||(e.tips("金额必须保留两位小数，且大于0.00"),this.money="")},ok:function(){var t=this;clearInterval(t.countdown),t.resetpayStatus();var o={rechargeMoney:t.money,token:c,requestSource:"WAP"};$.ajax({type:"post",url:"/userCenter/userAccount/confirmRecharge",data:o,dataType:"json",success:function(t){"0000"==t.code?($("#payForm").attr("action",t.data.rechargeUrl),$("#req_data").val(t.data.reqData),document.getElementById("payForm").submit()):e.tips(t.msg)}})},aboutRecharge:function(){e.alert({title:"关于充值",content:"<div><p><strong>温馨提示：</strong></p><p>1、使用网上充值方式进行充值前必须开通个人网上银行；</p><p>2、快捷充值时如遇充值金额大于您的银行卡单日上限，您可以通过以下几种方式完成充值。(1)可根据银行单日限额，多天/多次充值，达到所需金额。(2)使用网银进行充值</p><p>3、充值服务由第三方支付机构连连支付提供充值服务，如在充值期间遇到任何问题，您可以联系：</p><p>连连支付客服：400-600-5200 </p><p>聚米众筹客服：400-801-4680</p></div>",button:!1})},resetpayStatus:function(){var e=this,t=$(".fake input");e.phonecode="",$(".active").css("left","0px");for(var o=e.phonecode.trim(),a=o.length,n=0;n<a;n++)t.eq(n).val(o[n]),t.eq(n).next().length&&$(".active").css("left",t.eq(n+1).offset().left-t.eq(0).offset().left-parseInt($(".wrap").css("padding-left"))+"px");t.each(function(e,t){e>=a&&$(this).val("")})},inputpwdKeyup:function(){var t=this,o=$(".fake input"),a=/^[0-9]*$/;if(t.phonecode||$(".active").css("left","0px"),a.test(t.phonecode)){for(var n=t.phonecode.trim(),s=n.length,r=0;r<s;r++)o.eq(r).val(n[r]),o.eq(r).next().length&&$(".active").css("left",o.eq(r+1).offset().left-o.eq(0).offset().left-parseInt($(".wrap").css("padding-left"))+"px");if(o.each(function(e,t){e>=s&&$(this).val("")}),6==s){var i={orderNo:t.orderNo,rechargeAmount:t.money,smsCode:t.phonecode,token:c,requestSource:"WAP"};$.ajax({url:"/userCenter/userAccount/confirmRecharge",type:"post",dataType:"json",data:i,success:function(o){"0000"==o.code?location.href="/h5/views/account/assets/rechargeSuccess.html"+location.search:(e.tips(o.msg),t.resetpayStatus(),document.getElementById("real").focus())}})}}else e.tips("请输入6位数字支付密码"),t.resetpayStatus()}}}},ready:function(){$("#myloading").remove(),t.setActiveNav("account"),r.setTitle().setDesc().setImg().setUrl().share()}}):e.tips(o.errorMsg)}})});var u=location.href.split("&code=")[0],p=location.href.split("&code=")[1];if(p){var d=p.split("&state=")[0];n(d,u)}});