define(["jquery","jumi","isLogin","isLoginwx","vue","weixin","getPara","screenControl","wxBackbtn"],function(t,e,s,a,n,u,i,d,r){r.setReturnUrl();var o=i.get(),c=localStorage.getItem("token");if(o.from)var h=location.href.split("&code=")[1];else var h=location.href.split("?code=")[1];var l={token:c,requestSource:"WAP"};if(h){var S=h.split("&state=")[0];a(S,"/h5/views/activity/midAutumn.html")}else s(function(){t.ajax({url:"/moonFetivalActivity/getHomePage",type:"get",dataType:"json",data:l,success:function(s){"0000"===s.code&&new n({el:"body",components:{"my-midautumn":{template:"#midautumnTemplate",data:function(){return{userName:"",userPhone:"",userAddress:"",userAddressId:0,addressList:[],actStatus:s.data.actStatus,count:s.data.count,taskOneend:s.data.scheduleData.zhongFlag,taskTwoend:s.data.scheduleData.qiuFlag,taskThereend:s.data.scheduleData.jiaFlag,taskFourend:s.data.scheduleData.jieFlag,receiveStatus:s.data.scheduleData.receiveStatus,addressDialog:!1,stage:"1",zhongStatus:"1",qiuStatus:"1",jiaStatus:"1",jieStatus:"1",isShare:!1}},methods:{prizes:function(){e.alert({title:"",content:document.getElementById("prizePar"),button:[{value:"知道了"}]})},ruleDesc:function(){e.alert({title:"",content:"<p style='margin-bottom:4vw;'>1、集齐“中”“秋”“佳”“节”四个字，即可领取精美月饼礼盒，限量200份。</p><p  style='margin-bottom:4vw;'>2、活动结束后，所有参与活动但未领到月饼的用户可获得28元红包奖励。</p><p style='margin-bottom:4vw;'>3、新手训练营及不回报本金型投资不参与本次活动。</p><p style='margin-bottom:4vw;'>4、活动奖励会在领取后3个工作日内发放，如发放日与周末或节假日冲突，则延迟至工作日发放。</p><p style='margin-bottom:4vw;'>5、在法律允许范围内，本活动最终解释权归属聚米众筹所有。</p><p style='margin-bottom:4vw;'>6、活动时间：9月11日-9月30日。</p><p>在此，聚米运营团队感谢您长久以来的陪伴和支持。</p>",button:[{value:"知道了"}]})},goLightupOne:function(){location.href="/h5/views/wheel/wheel.html"},goLightupTwo:function(){location.href="/h5/views/main/list.html?type=0&status=0&itemName="},goLightupThere:function(){var e={token:c,requestSource:"WAP"};t.ajax({url:"/moonFetivalActivity/shareLightWord",type:"post",dataType:"json",data:e,success:function(t){"0000"==t.code&&location.reload()},error:function(){}})},goLightupFour:function(){location.href="/h5/views/main/list.html?type=0&status=0&itemName="},clickZhong:function(){var t=this;t.stage="1","0"==t.taskOneend?(t.zhongStatus="2",t.qiuStatus="1",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"0"==t.taskTwoend?(t.zhongStatus="3",t.qiuStatus="1",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"0"==t.taskThereend?(t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"1"==t.taskThereend&&"0"==t.taskFourend?(t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="3",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"1"==t.taskThereend&&"1"==t.taskFourend&&(t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="3",t.jieStatus="3")},clickQiu:function(){var t=this;"0"==t.taskOneend?(t.stage="1",e.tips("请先点亮上一个文字~"),t.zhongStatus="2",t.qiuStatus="1",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"0"==t.taskTwoend?(t.stage="2",t.zhongStatus="3",t.qiuStatus="2",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"0"==t.taskThereend?(t.stage="2",t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"1"==t.taskThereend&&"0"==t.taskFourend?(t.stage="2",t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="3",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"1"==t.taskThereend&&"1"==t.taskFourend&&(t.stage="2",t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="3",t.jieStatus="3")},clickJia:function(){var t=this;"0"==t.taskOneend?(t.stage="1",e.tips("请先点亮上一个文字~"),t.zhongStatus="2",t.qiuStatus="1",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"0"==t.taskTwoend?(t.stage="2",e.tips("请先点亮上一个文字~"),t.zhongStatus="3",t.qiuStatus="2",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"0"==t.taskThereend?(t.stage="3",t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="2",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"1"==t.taskThereend&&"0"==t.taskFourend?(t.stage="3",t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="3",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"1"==t.taskThereend&&"1"==t.taskFourend&&(t.stage="3",t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="3",t.jieStatus="3")},clickJie:function(){var t=this;"0"==t.taskOneend?(t.stage="1",e.tips("请先点亮上一个文字~"),t.zhongStatus="2",t.qiuStatus="1",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"0"==t.taskTwoend?(t.stage="2",e.tips("请先点亮上一个文字~"),t.zhongStatus="3",t.qiuStatus="2",t.jiaStatus="1",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"0"==t.taskThereend?(t.stage="3",e.tips("请先点亮上一个文字~"),t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="2",t.jieStatus="1"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"1"==t.taskThereend&&"0"==t.taskFourend?(t.stage="4",t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="3",t.jieStatus="2"):"1"==t.taskOneend&&"1"==t.taskTwoend&&"1"==t.taskThereend&&"1"==t.taskFourend&&(t.stage="4",t.zhongStatus="3",t.qiuStatus="3",t.jiaStatus="3",t.jieStatus="3")},getReward:function(){var s=this;"0"==s.receiveStatus?e.alert({title:"",content:"点亮所有文字即可领取奖励",button:[{value:"知道了"}]}):"1"==s.receiveStatus?(s.addressDialog=!0,t.ajax({url:"/moonFetivalActivity/getAddressList",type:"get",dataType:"json",data:l,success:function(t){"0000"===t.code?s.addressList=t.data:e.tips(t.msg)}})):"2"==s.receiveStatus?e.alert({title:"",content:"奖励已领取",button:[{value:"知道了"}]}):"3"==s.receiveStatus&&e.alert({title:"",content:"奖品已兑完",button:[{value:"知道了"}]})},checkedSign:function(e,s){var a=this,n=t(s.target).prop("checked");n?(t(".checkedSign").prop("checked",!1),t(".checkedSign").removeClass("bg-checked"),t(".address").removeClass("li-checked"),t(s.target).prop("checked",!0),t(".newAddress").prop("disabled",!0),t(s.target).addClass("bg-checked"),t(".address"+e.addressId).addClass("li-checked"),a.userName=e.userName,a.userPhone=e.userPhone,a.userAddress=e.address,a.userAddressId=e.addressId):(t(s.target).prop("checked",!1),t(".newAddress").prop("disabled",!1),t(s.target).removeClass("bg-checked"),t(".address"+e.addressId).removeClass("li-checked"),a.userName="",a.userPhone="",a.userAddress="",a.userAddressId=0)},cancelAddress:function(){var t=this;t.addressDialog=!1,t.userName="",t.userPhone="",t.userAddress="",t.userAddressId=0},sureAddress:function(){var s=this,a=/^1\d{10}$/,n=/^[\s]*$/;if(n.test(s.userName))return e.tips("收货人不能为空~"),!1;if(n.test(s.userPhone))return e.tips("联系电话不能为空~"),!1;if(n.test(s.userAddress))return e.tips("收货地址不能为空~"),!1;if(!a.test(s.userPhone))return e.tips("请输入正确的11位手机号~"),!1;var u={address:s.userAddress,addressId:s.userAddressId,receiverName:s.userName,receiverPhone:s.userPhone,requestSource:"WAP",token:c};t.ajax({url:"/moonFetivalActivity/receiveReward",type:"post",dataType:"json",data:u,success:function(t){s.addressDialog=!1,s.userName="",s.userPhone="",s.userAddress="",s.userAddressId=0,"0000"===t.code?e.alert({title:"",content:"领取成功，奖励将会在3个工作日内发放",button:[{value:"知道了",callback:function(){location.reload()}}]}):e.tips(t.msg)}})},inputFocus:function(){t("body").height(document.body.scrollHeight)}}}},ready:function(){t("#myloading").remove();var e=this;e.$children[0].taskOneend?e.$children[0].zhongStatus="3":e.$children[0].zhongStatus="2",e.$children[0].taskTwoend&&(e.$children[0].qiuStatus="3"),e.$children[0].taskThereend&&(e.$children[0].jiaStatus="3"),e.$children[0].taskFourend&&(e.$children[0].jieStatus="3");var s={title:"月满中秋好“食”光",desc:"家人，美食，团圆的饭桌上一样都不能少",img:"https://jumifinancetest.oss-cn-hangzhou.aliyuncs.com/itemDetail/1535680850081045613.png",url:location.origin+"/h5/views/activity/midAutumn.html"};u.setTitle(s.title).setDesc(s.desc).setImg(s.img).setUrl(s.url).share("midAutumnActivity")}})}})})});